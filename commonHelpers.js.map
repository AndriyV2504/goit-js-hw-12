{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43967395-ba8c6739f73e8322e41736fdd';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error(\"Fetch error:\", error);\n    throw error;\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet lightbox;\n\nexport function renderImages(images) {\n    const gallery = document.querySelector(`.gallery`);\n    const imagesMarkup = images.map(image => createImageCard(image)).join(``);\n    gallery.insertAdjacentHTML(`beforeend`, imagesMarkup);\n    refreshLightbox();\n}\n\nfunction createImageCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n        <div class=\"photo-card\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img \n                  width=\"360px\";\n                  height=\"200px\";\n                  src=\"${webformatURL}\" \n                  alt=\"${tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n                <p class=\"info-item\"><b>Views:</b> ${views}</p>\n                <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n                <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p>\n            </div>\n        </div>\n    `;\n}\n\nexport function showNotification(message, type = `info`) {\n    iziToast[type]({\n        message: message,\n        position: `topRight`,\n        padding: `20px`,\n        backgroundColor: '#EF4040',\n    });\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector(`.gallery`);\n    gallery.innerHTML = ``;\n}\n\nexport function initLightbox() {\n    lightbox = new SimpleLightbox(`.gallery a`, {\n        captionsData: `alt`,\n        captionDelay: 250,\n    });\n}\n\nfunction refreshLightbox() {\n    if (lightbox) {\n        lightbox.refresh();\n    }\n}\n\nexport function showLoader() {\n    document.querySelector(`.loader`).classList.remove(`hidden`);\n}\n\nexport function hideLoader() {\n    document.querySelector(`.loader`).classList.add(`hidden`);\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showNotification, clearGallery, initLightbox, showLoader, hideLoader } from './js/render-functions.js';\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst perPage = 15;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const form = document.querySelector('.search-form');\n    const loadMoreButton = document.createElement('button');\n    loadMoreButton.textContent = 'Load more';\n    loadMoreButton.classList.add('load-more');\n    document.body.appendChild(loadMoreButton);\n    loadMoreButton.style.display = 'none';\n\n    form.addEventListener('submit', onSearch);\n    loadMoreButton.addEventListener('click', onLoadMore);\n\n    initLightbox();\n});\n\nasync function onSearch(event) {\n    event.preventDefault();\n\n    const query = event.target.elements.searchQuery.value.trim();\n    if (!query) {\n        showNotification('Please enter a search query!', 'warning');\n        return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n\n    clearGallery();\n    showLoader();\n\n    try {\n        const data = await fetchImages(query, currentPage, perPage);\n        hideLoader();\n\n        if (data.hits.length === 0) {\n            showNotification('Sorry, there are no images matching your search query. Please try again!', 'warning');\n            return;\n        }\n\n        renderImages(data.hits);\n        updateLoadMoreButton(data.totalHits);\n    } catch (error) {\n        hideLoader();\n        showNotification('An error occurred while fetching images. Please try again!', 'error');\n    }\n}\n\nasync function onLoadMore() {\n    currentPage += 1;\n    showLoader();\n\n    try {\n        const data = await fetchImages(currentQuery, currentPage, perPage);\n        hideLoader();\n        renderImages(data.hits);\n        updateLoadMoreButton(data.totalHits);\n    } catch (error) {\n        hideLoader();\n        showNotification('An error occurred while fetching images. Please try again!', 'error');\n    }\n}\n\nfunction updateLoadMoreButton(totalHits) {\n    const loadMoreButton = document.querySelector('.load-more');\n    if (currentPage * perPage >= totalHits) {\n        loadMoreButton.style.display = 'none';\n        showNotification(\"We're sorry, but you've reached the end of search results.\", 'info');\n    } else {\n        loadMoreButton.style.display = 'block';\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    initLightbox();\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","error","lightbox","renderImages","images","gallery","imagesMarkup","image","createImageCard","refreshLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showNotification","message","type","iziToast","clearGallery","initLightbox","SimpleLightbox","showLoader","hideLoader","currentPage","currentQuery","form","loadMoreButton","onSearch","onLoadMore","event","data","updateLoadMoreButton","totalHits"],"mappings":"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"}